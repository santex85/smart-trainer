# –û—Ç—á—ë—Ç –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é (–¢–ó)  
## –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ ¬´–ò–ò-–¢—Ä–µ–Ω–µ—Ä¬ª (MVP)

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 21 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** smart_trainer (backend FastAPI + frontend Expo/React Native)

---

## 1. –†–µ–∑—é–º–µ

| –†–∞–∑–¥–µ–ª –¢–ó | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –ò–ò-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫, —Ç—Ä–∏ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–≥—Ä—É–∑–∫–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –ö–ë–ñ–£) |
| –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Data Flow) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –ù–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ Intervals.icu, —Å–±–æ—Ä —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤ ‚Üí Intervals ‚Üí –Ω–∞—à backend + LLM |
| –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | Backend Python/FastAPI ‚úÖ, PostgreSQL ‚úÖ, Frontend React Native (Expo) ‚úÖ; –º–æ–¥–µ–ª—å Gemini –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¢–ó |
| –ú–æ–¥—É–ª—å 1 ‚Äî –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è | ‚úÖ –í –æ—Å–Ω–æ–≤–Ω–æ–º | –§–æ—Ç–æ ‚Üí Gemini ‚Üí JSON; Structured Output —á–µ—Ä–µ–∑ `response_mime_type`; –Ω–µ—Ç —è–≤–Ω–æ–≥–æ JSON Schema –≤ API |
| –ú–æ–¥—É–ª—å 2 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∏–æ–º–µ—Ç—Ä–∏–∏ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏ | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | API-–∫–ª—é—á (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ), GET wellness/events, POST —Å–æ–±—ã—Ç–∏–π; OAuth –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–¢–ó –¥–æ–ø—É—Å–∫–∞–µ—Ç ¬´–ª–∏–±–æ¬ª) |
| –ú–æ–¥—É–ª—å 3 ‚Äî –ò–ò-–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è, Go/Modify/Skip, —á–∏—Å—Ç—ã–µ CTL/ATL/TSB, Pydantic, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è |
| –ú–æ–¥—É–ª—å 4 ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –î–∞—à–±–æ—Ä–¥, FAB –∫–∞–º–µ—Ä—ã, —á–∞—Ç –µ—Å—Ç—å; –æ—Å—Ç–∞—Ç–æ–∫ –ö–ë–ñ–£ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è; –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ; —è–≤–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Gemini –≤ –∫–æ–¥–µ –Ω–µ—Ç |
| –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Roadmap) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç | –°–ø—Ä–∏–Ω—Ç—ã 1‚Äì4 –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏ README |

---

## 2. –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º –¢–ó

### 2.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

- **–¢–ó:** –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –¥–ª—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –≤–∏–¥–æ–≤ —Å–ø–æ—Ä—Ç–∞ –∏ —Ñ–∏—Ç–Ω–µ—Å–∞; –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–∞ –ø–æ TSS/CTL/ATL, –º–µ—Ç—Ä–∏–∫–∞–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–æ–Ω, HRV) –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–º—É –±–∞–ª–∞–Ω—Å—É (–ö–ë–ñ–£ –ø–æ —Ñ–æ—Ç–æ).
- **–§–∞–∫—Ç:** README –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ–ø–∏—Å—ã–≤–∞—é—Ç —Ç–æ—Ç –∂–µ –ø—Ä–æ–¥—É–∫—Ç. Backend –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –ø–∏—Ç–∞–Ω–∏–µ (`food_log`), wellness (—Å–æ–Ω, RHR, HRV), –Ω–∞–≥—Ä—É–∑–∫—É (CTL/ATL/TSB) –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä; —Ä–µ—à–µ–Ω–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–ª–∞–Ω –≤ Intervals.icu.
- **–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç.**

---

### 2.2. –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Data Flow)

- **–¢–ó:** –°–±–æ—Ä —Å –≥–∞–¥–∂–µ—Ç–æ–≤ ‚Üí –æ–±–ª–∞–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π ‚Üí Intervals.icu (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞); –Ω–∞—à–µ –ü–û ‚Äî —Å–ª–æ–π –ø–æ–≤–µ—Ä—Ö Intervals (API + –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è + LLM), –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å.
- **–§–∞–∫—Ç:** `intervals_client` –∏ `intervals_sync` –∑–∞–±–∏—Ä–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Intervals.icu; –ø–∏—Ç–∞–Ω–∏–µ –≤–µ–¥—ë—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (—Ñ–æ—Ç–æ ‚Üí Gemini ‚Üí `food_log`); –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –∏ –ø—Ä–∏ Modify —Å–æ–∑–¥–∞—ë—Ç —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ `create_event`.
- **–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç.**

---

### 2.3. –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------------|------------|--------|
| Frontend: Flutter –∏–ª–∏ React Native | Expo (React Native) | ‚úÖ |
| Backend: Python (FastAPI) | FastAPI –≤ `backend/app/main.py` | ‚úÖ |
| –ë–î: PostgreSQL | PostgreSQL + asyncpg, Alembic, –º–æ–¥–µ–ª–∏ –≤ `app/models/` | ‚úÖ |
| AI: Google Gemini API, –º–æ–¥–µ–ª—å **gemini-3-flash-preview** | –í –∫–æ–Ω—Ñ–∏–≥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **gemini-2.0-flash** (`config.py`, `.env.example`) | ‚ö†Ô∏è –û—Ç–ª–∏—á–∏–µ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£—Ç–æ—á–Ω–∏—Ç—å –≤ –¢–ó –∏–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ: –ª–∏–±–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –º–æ–¥–µ–ª—å (gemini-2.0-flash), –ª–∏–±–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ gemini-3-flash-preview –ø—Ä–∏ –µ—ë –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.

---

### 2.4. –ú–æ–¥—É–ª—å 1 ‚Äî –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è (Computer Vision)

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------------|------------|--------|
| –î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è ¬´–æ–¥–Ω–æ –Ω–∞–∂–∞—Ç–∏–µ¬ª, –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞/—à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ | –ö–∞–º–µ—Ä–∞/–≥–∞–ª–µ—Ä–µ—è ‚Üí `POST /api/v1/nutrition/analyze` ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `food_log` | ‚úÖ |
| –§–æ—Ç–æ —Ç–∞—Ä–µ–ª–∫–∏ ‚Üí Gemini, –æ—Ü–µ–Ω–∫–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏, –æ–±—ä—ë–º–∞, —Å–∫—Ä—ã—Ç—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤ `gemini_nutrition.py`: –ø–ª–æ—Ç–Ω–æ—Å—Ç—å, —Å–∫—Ä—ã—Ç—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, –æ–±—ä—ë–º –ø–æ—Ä—Ü–∏–∏ | ‚úÖ |
| **Structured Outputs (JSON Schema)** ‚Äî —Ç–æ–ª—å–∫–æ JSON | `response_mime_type: "application/json"`, –ø–∞—Ä—Å–∏–Ω–≥ JSON + –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `NutritionAnalysisResult` (Pydantic) | ‚úÖ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ mime type –∏ Pydantic) |
| –ü–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, –≤–µ—Å –ø–æ—Ä—Ü–∏–∏ (–≥), –∫–∞–ª–æ—Ä–∏–∏, –±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã | –°—Ö–µ–º–∞ `NutritionAnalysisResult`: name, portion_grams, calories, protein_g, fat_g, carbs_g | ‚úÖ |

**–ó–∞–º–µ—á–∞–Ω–∏–µ:** –í –¢–ó —É–∫–∞–∑–∞–Ω–æ ¬´–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ Structured Outputs (JSON Schema) –≤ Gemini API¬ª. –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π JSON —á–µ—Ä–µ–∑ `response_mime_type="application/json"` –∏ –ø–æ—Å–ª–µ–¥—É—é—â—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é Pydantic. –û—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ JSON Schema –≤ Gemini API (–Ω–∞–ø—Ä–∏–º–µ—Ä, `response_schema=...)` –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¢–ó —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º schema –≤ API.

**–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É;** –ø—Ä–∏ —Å—Ç—Ä–æ–≥–æ–π —Ç—Ä–∞–∫—Ç–æ–≤–∫–µ –¢–ó ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π JSON Schema –≤ –≤—ã–∑–æ–≤ Gemini.

---

### 2.5. –ú–æ–¥—É–ª—å 2 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∏–æ–º–µ—Ç—Ä–∏–∏ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (Intervals.icu)

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------------|------------|--------|
| OAuth 2.0 **–∏–ª–∏** –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π API-–∫–ª—é—á | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ API-–∫–ª—é—á: `POST /intervals/link` (athlete_id + api_key), —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ | ‚úÖ (–¢–ó: ¬´–ª–∏–±–æ¬ª) |
| –¢–æ–∫–µ–Ω—ã/–∫–ª—é—á–∏ —Ç–æ–ª—å–∫–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –Ω–∞ backend | `intervals_credentials.encrypted_token_or_key`, `crypto.py` (Fernet) | ‚úÖ |
| GET: Wellness (—Å–æ–Ω, RHR, HRV), —Ñ–æ—Ä–º–∞ (CTL/ATL) | `get_wellness`, `get_activities` –≤ `intervals_client`; –∫—ç—à –≤ `wellness_cache`; `GET /intervals/wellness` | ‚úÖ |
| POST/PUT: –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–ª–∞–Ω–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å | `create_event`, `update_event` –≤ `intervals_client`; –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–∏ Modify –≤—ã–∑—ã–≤–∞–µ—Ç `create_event` | ‚úÖ |
| –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ–ø—Ä–æ—Å API | APScheduler –≤ `main.py` ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 06:00), `sync_all_users_wellness` | ‚úÖ |

**–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç.**

---

### 2.6. –ß–∏—Å—Ç—ã–µ –º–µ—Ç—Ä–∏–∫–∏ CTL/ATL/TSB (–æ—Ç—Å–µ—á–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)

- **–¢–ó:** ¬´–°–∫—Ä–∏–ø—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –≤—ã—á–∏—Å–ª—è—Ç—å –∏—Å—Ç–∏–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Ñ–∏—Ç–Ω–µ—Å–∞ (—á–∏—Å—Ç—ã–µ –º–µ—Ç—Ä–∏–∫–∏ CTL/ATL/TSB) –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å, –æ—Ç—Å–µ–∫–∞—è –ø—Ä–æ–≥–Ω–æ–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫¬ª.
- **–§–∞–∫—Ç:** –í `intervals_sync.py` TSS —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ **–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º** (`get_activities`), –ø–æ –Ω–∏–º —Å—Ç—Ä–æ–∏—Ç—Å—è `tss_by_date` –∏ –¥–∞–ª–µ–µ EMA –¥–ª—è CTL/ATL/TSB. –ü–ª–∞–Ω–æ–≤—ã–µ (–µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ) —Å–æ–±—ã—Ç–∏—è –≤ —Ä–∞—Å—á—ë—Ç –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç.
- **–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç.**

---

### 2.7. –ú–æ–¥—É–ª—å 3 ‚Äî –ò–ò-–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------------|------------|--------|
| –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö: –ø–∏—Ç–∞–Ω–∏–µ, —Å–æ–Ω, Intervals | `run_daily_decision`: —Å—É–º–º–∞ –ø–æ `food_log` –∑–∞ –¥–µ–Ω—å, `WellnessCache` –∑–∞ —Å–µ–≥–æ–¥–Ω—è, —Å–æ–±—ã—Ç–∏—è –∏–∑ Intervals –∑–∞ –¥–µ–Ω—å | ‚úÖ |
| –£—Ä–æ–≤–µ–Ω—å 1 (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç): —Å–æ–Ω, HRV, RHR, –¥–µ—Ñ–∏—Ü–∏—Ç –∫–∞–ª–æ—Ä–∏–π/–≥–ª–∏–∫–æ–≥–µ–Ω–∞ | –í —Å–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–æ–º–ø—Ç–µ: ¬´Level 1 (primary): Readiness ‚Äî sleep quality/duration, HRV, RHR, calorie/carb deficit¬ª; ¬´Level 2 cannot override Level 1¬ª | ‚úÖ |
| –£—Ä–æ–≤–µ–Ω—å 2: TSS, CTL, ATL | ¬´Level 2 (secondary): Training load math ‚Äî TSS, CTL, ATL¬ª | ‚úÖ |
| –£—Ä–æ–≤–µ–Ω—å 3: –ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è (Seiler), –º–∏–Ω–∏–º—É–º —Å–µ—Ä–æ–π –∑–æ–Ω—ã (–ó–æ–Ω–∞ 3) | ¬´Level 3 (diagnostic): Prefer polarised distribution (Seiler); minimise grey zone (Zone 3)¬ª | ‚úÖ |
| –†–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ Go / Modify / Skip | `Decision` (enum), –æ—Ç–≤–µ—Ç LLM –ø–∞—Ä—Å–∏—Ç—Å—è –≤ `OrchestratorResponse` | ‚úÖ |
| –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–æ–µ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (7‚Äì14 –¥–Ω–µ–π) | –í –ø—Ä–æ–º–ø—Ç–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª–µ `suggestions_next_days` (¬´optional text for next 7-14 days¬ª); –≤ –æ—Ç–≤–µ—Ç–µ –ò–ò –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –¥–Ω–∏ | ‚úÖ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ç–µ–∫—Å—Ç–∞) |
| –ò–Ω–∂–µ–Ω–µ—Ä–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤: —Ä–æ–ª—å + —Ü–µ–ª—å + –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è + —Ñ–æ—Ä–º–∞—Ç | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∑–∞–¥–∞—ë—Ç —Ä–æ–ª—å (—Ñ–∏–∑–∏–æ–ª–æ–≥), —Ü–µ–ª—å (Go/Modify/Skip), –∏–µ—Ä–∞—Ä—Ö–∏—é –∏ —Å—Ç—Ä–æ–≥–∏–π JSON | ‚úÖ |
| –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥, –≤–∞–ª–∏–¥–∞—Ü–∏—è | `response_mime_type: "application/json"`, –ø–∞—Ä—Å–∏–Ω–≥ + `OrchestratorResponse`/`ModifiedPlanItem` (Pydantic) | ‚úÖ |
| –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ API | –ü—Ä–∏ `Decision.MODIFY` –∏ –Ω–∞–ª–∏—á–∏–∏ `modified_plan` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `create_event` —Å title, start_date, end_date, description, type | ‚úÖ |

**–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç.**

---

### 2.8. –ú–æ–¥—É–ª—å 4 ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------------|------------|--------|
| –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (–¥–∞—à–±–æ—Ä–¥): —Å–≤–æ–¥–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å | `DashboardScreen`: –±–ª–æ–∫–∏ ¬´Today¬ª, –ø–∏—Ç–∞–Ω–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, —Å–ª–µ–¥—É—é—â–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ | ‚úÖ |
| –û—Å—Ç–∞—Ç–æ–∫ –∫–∞–ª–æ—Ä–∏–π/–º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ ¬´Nutrition (goal remainder)¬ª, –Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ **—Ü–µ–ª–µ–≤—ã–µ** –∑–Ω–∞—á–µ–Ω–∏—è (CALORIE_GOAL –∏ —Ç.–¥.). –ù–µ—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ backend –∑–∞ —Å—É–º–º–æ–π –ø–æ `food_log` –∑–∞ –¥–µ–Ω—å –∏ –≤—ã–≤–æ–¥–∞ –æ—Å—Ç–∞—Ç–∫–∞ (—Ü–µ–ª—å ‚àí –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ) | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –°—Ç–∞—Ç—É—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è | –ö–∞—Ä—Ç–æ—á–∫–∞ ¬´Recovery¬ª: sleep, RHR, HRV –∏ –≤—ã–≤–æ–¥ ¬´OK¬ª / ¬´Below baseline¬ª | ‚úÖ |
| –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ | ¬´Next workout¬ª –∏–∑ `getEvents(today, today)` | ‚úÖ |
| FAB –¥–ª—è –∫–∞–º–µ—Ä—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ | –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ ¬´Photo meal¬ª (üì∑), –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω –∫–∞–º–µ—Ä—ã | ‚úÖ |
| –ß–∞—Ç —Å –ò–ò-–∫–æ—É—á–µ–º: —É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–≤–æ–¥–∫–∏, –≤–µ—á–µ—Ä–Ω–∏–µ –∏—Ç–æ–≥–∏ | –ß–∞—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω; —É—Ç—Ä–µ–Ω–Ω–∏–µ/–≤–µ—á–µ—Ä–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–¥–∫–∏ (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é) –≤ –∫–æ–¥–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (—á–∞—Ç –µ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–¥–∫–∏ ‚Äî –Ω–µ—Ç) |
| –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç | `TextInput` + `sendChatMessage` | ‚úÖ |
| –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | –í `app.json` –µ—Å—Ç—å `NSMicrophoneUsageDescription` (¬´Optional for voice messages¬ª), –Ω–æ –≤ `ChatScreen` —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥; –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

**–í—ã–≤–æ–¥:** ‚ö†Ô∏è **–ß–∞—Å—Ç–∏—á–Ω–æ:** –¥–∞—à–±–æ—Ä–¥, FAB, —á–∞—Ç –∏ —Ç–µ–∫—Å—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã; **–Ω–µ—Ç:** –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–∞ –ö–ë–ñ–£ –ø–æ —Ñ–∞–∫—Ç—É –ø–∏—Ç–∞–Ω–∏—è, –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É—Ç—Ä–µ–Ω–Ω–∏—Ö/–≤–µ—á–µ—Ä–Ω–∏—Ö —Å–≤–æ–¥–æ–∫.

---

### 2.9. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------------|------------|--------|
| –¢–æ–∫–µ–Ω—ã OAuth –∏ API-–∫–ª—é—á–∏ Intervals ‚Äî —Ç–æ–ª—å–∫–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –Ω–∞ backend | –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ `intervals_credentials` –≤ –≤–∏–¥–µ `encrypted_token_or_key`, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ Fernet | ‚úÖ |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Gemini, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—â–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è | –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ `gemini_nutrition.py` —É–∫–∞–∑–∞–Ω–æ ¬´prevent data retention for training¬ª; –≤ –∫–æ–¥–µ –≤—ã–∑–æ–≤–æ–≤ `generate_content` **–Ω–µ –Ω–∞–π–¥–µ–Ω–æ** —è–≤–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–∏–ø–∞ `usage_metadata` / –æ–ø—Ü–∏–π ¬´–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è¬ª (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏ Google AI SDK) | ‚ùå –ù–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –≤ –∫–æ–¥–µ |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞–Ω–æ–≤ –æ—Ç LLM (Pydantic) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API –∫–∞–ª–µ–Ω–¥–∞—Ä—è | `ModifiedPlanItem` –∏ `OrchestratorResponse` ‚Äî Pydantic; –ø–µ—Ä–µ–¥ `create_event` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª—è –∏–∑ `result.modified_plan` | ‚úÖ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Google Gemini API (—Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ SDK) –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è –≤–æ –≤—Å–µ –≤—ã–∑–æ–≤—ã (nutrition –∏ orchestrator/chat).

**–í—ã–≤–æ–¥:** ‚úÖ –ü–æ —Ö—Ä–∞–Ω–µ–Ω–∏—é –∫–ª—é—á–µ–π –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏; ‚ùå –ø–æ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–º—É –æ—Ç–∫–ª—é—á–µ–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Gemini ‚Äî –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ.

---

### 2.10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ –æ–¥–∏–Ω –¥–µ–Ω—å (User Flow)

| –í—Ä–µ–º—è –ø–æ –¢–ó | –û–∂–∏–¥–∞–Ω–∏–µ –¢–ó | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-------------|-------------|------------|--------|
| 07:00 | Garmin ‚Üí —Å–æ–Ω –≤ Intervals; backend –∑–∞–±–∏—Ä–∞–µ—Ç —Å–æ–Ω, RHR | –°–∏–Ω–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∑–∞–±–∏—Ä–∞–µ—Ç wellness (–≤ —Ç.—á. —Å–æ–Ω, RHR) –∏–∑ Intervals –∏ –∫—ç—à–∏—Ä—É–µ—Ç | ‚úÖ |
| 07:30 | –ü—É—à –æ—Ç –ò–ò: ¬´–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ‚Ä¶ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∏–∂–µ‚Ä¶¬ª | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å —É—Ç—Ä–µ–Ω–Ω–∏–º –±—Ä–∏—Ñ–∏–Ω–≥–æ–º –≤ –∫–æ–¥–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã | ‚ùå |
| 13:00 | –§–æ—Ç–æ —Ç–∞—Ä–µ–ª–∫–∏ ‚Üí Gemini ‚Üí JSON, —Ñ–∏–∫—Å–∞—Ü–∏—è –ö–ë–ñ–£ | `POST /nutrition/analyze` ‚Üí Gemini ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `food_log` | ‚úÖ |
| 16:00 | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä: –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Å–æ–Ω + —É–≥–ª–µ–≤–æ–¥—ã + –ø–ª–∞–Ω) ‚Üí —Ä–µ—à–µ–Ω–∏–µ, –∑–∞–º–µ–Ω–∞ –ø–ª–∞–Ω–∞, —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∏—Ç–∞–Ω–∏–µ, wellness, —Å–æ–±—ã—Ç–∏—è; –ø—Ä–∏ Modify —Å–æ–∑–¥–∞—ë—Ç —Å–æ–±—ã—Ç–∏–µ –≤ Intervals –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç | ‚úÖ |

**–í—ã–≤–æ–¥:** –°—Ü–µ–Ω–∞—Ä–∏–π ¬´—Ñ–æ—Ç–æ ‚Üí —Ä–µ—à–µ–Ω–∏–µ ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –∏ —á–∞—Ç¬ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω; **–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:** –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Ç—Ä–µ–Ω–Ω–∏–π –±—Ä–∏—Ñ–∏–Ω–≥).

---

### 2.11. –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Roadmap)

- **–°–ø—Ä–∏–Ω—Ç 1 (Backend & –ò–ò):** FastAPI, Gemini, –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –µ–¥—ã, JSON-–æ—Ç–≤–µ—Ç ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`main.py`, `gemini_nutrition.py`, `nutrition` router).
- **–°–ø—Ä–∏–Ω—Ç 2 (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö):** –°–≤—è–∑—å —Å Intervals.icu, –≤—ã—Ç—è–≥–∏–≤–∞–Ω–∏–µ wellness/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, –∑–∞–≥—Ä—É–∑–∫–∞ –≤–æ—Ä–∫–∞—É—Ç–æ–≤ ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`intervals_client`, `intervals_sync`, —Ä–æ—É—Ç—ã `intervals`).
- **–°–ø—Ä–∏–Ω—Ç 3 (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä):** –ú–æ–¥—É–ª—å —Ä–µ—à–µ–Ω–∏–π, –∏–µ—Ä–∞—Ä—Ö–∏—è –º–µ—Ç—Ä–∏–∫, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`orchestrator.py`, –ø—Ä–æ–º–ø—Ç, Pydantic, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Intervals).
- **–°–ø—Ä–∏–Ω—Ç 4 (Frontend & —Ä–µ–ª–∏–∑):** –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∫–∞–º–µ—Ä–∞, –¥–∞—à–±–æ—Ä–¥, —á–∞—Ç), —Å–≤—è–∑–∫–∞ —Å backend ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (Expo, —ç–∫—Ä–∞–Ω—ã Dashboard/Camera/Chat, API client).

**–í—ã–≤–æ–¥:** ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç.**

---

## 3. –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –∏ –¥–æ—Ä–∞–±–æ—Ç–æ–∫

| ‚Ññ | –†–∞–∑–¥–µ–ª | –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ / –¥–æ—Ä–∞–±–æ—Ç–∫–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|---|--------|----------------------------|-------------|
| 1 | –°—Ç–µ–∫ | –ú–æ–¥–µ–ª—å: –≤ –¢–ó ‚Äî gemini-3-flash-preview, –≤ –ø—Ä–æ–µ–∫—Ç–µ ‚Äî gemini-2.0-flash | –ù–∏–∑–∫–∞—è (—É—Ç–æ—á–Ω–∏—Ç—å/—Å–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å) |
| 2 | –ú–æ–¥—É–ª—å 1 | –Ø–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JSON Schema –≤ Gemini API –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–µ—Å—Ç—å mime type + Pydantic) | –ù–∏–∑–∫–∞—è |
| 3 | –ú–æ–¥—É–ª—å 4 | –ù–∞ –¥–∞—à–±–æ—Ä–¥–µ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—Å—Ç–∞—Ç–æ–∫ –∫–∞–ª–æ—Ä–∏–π/–º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ `food_log` | –°—Ä–µ–¥–Ω—è—è |
| 4 | –ú–æ–¥—É–ª—å 4 | –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –≤ —á–∞—Ç –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω | –°—Ä–µ–¥–Ω—è—è (–µ—Å–ª–∏ –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ) |
| 5 | –ú–æ–¥—É–ª—å 4 / —Å—Ü–µ–Ω–∞—Ä–∏–π | –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É—Ç—Ä–µ–Ω–Ω–∏—Ö/–≤–µ—á–µ—Ä–Ω–∏—Ö —Å–≤–æ–¥–æ–∫ –∏ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –ò–ò | –°—Ä–µ–¥–Ω—è—è |
| 6 | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –í –∫–æ–¥–µ –Ω–µ –∑–∞–¥–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Gemini, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è | –°—Ä–µ–¥–Ω—è—è |

---

## 4. –ò—Ç–æ–≥–æ–≤–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ **–≤ —Ü–µ–ª–æ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¢–ó** –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, —Å—Ç–µ–∫—É (—Å –æ—Ç–ª–∏—á–∏–µ–º –ø–æ –∏–º–µ–Ω–∏ –º–æ–¥–µ–ª–∏ Gemini), –º–æ–¥—É–ª—è–º 1‚Äì3 –∏ —ç—Ç–∞–ø–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

- –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è —Å –≤—ã–≤–æ–¥–æ–º –≤ JSON –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Intervals.icu (API-–∫–ª—é—á, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —Å–∏–Ω–∫, —á–∏—Å—Ç—ã–µ CTL/ATL/TSB, –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–ª–∞–Ω–æ–≤).
- –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π, —Ñ–æ—Ä–º–∞—Ç–æ–º Go/Modify/Skip –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π UI: –¥–∞—à–±–æ—Ä–¥, FAB –∫–∞–º–µ—Ä—ã, —á–∞—Ç —Å –ò–ò-–∫–æ—É—á–µ–º.

–î–ª—è **–ø–æ–ª–Ω–æ–≥–æ** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ:

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ –≤—ã–≤–æ–¥ **–æ—Å—Ç–∞—Ç–∫–∞** –∫–∞–ª–æ—Ä–∏–π –∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ (—Ü–µ–ª—å –º–∏–Ω—É—Å —Å—É–º–º–∞ –ø–æ `food_log` –∑–∞ –¥–µ–Ω—å).
2. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å **–≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥** –≤ —á–∞—Ç –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–¥–∫–∏/–ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (—É—Ç—Ä–µ–Ω–Ω–∏–π –±—Ä–∏—Ñ–∏–Ω–≥ –∏ —Ç.–ø.).
3. –ó–∞–¥–∞—Ç—å –≤ –≤—ã–∑–æ–≤–∞—Ö Gemini **–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è** (–ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API).
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –º–æ–¥–µ–ª—å **gemini-3-flash-preview** –∏–ª–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –¢–ó –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ gemini-2.0-flash.

–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è smart_trainer (backend –∏ frontend) –∏ –ø—É–Ω–∫—Ç–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
