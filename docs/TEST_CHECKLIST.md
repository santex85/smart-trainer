# Чек-лист тестирования (tsspro.tech / Smart Trainer)

**Учётные данные:** Для входа на https://tsspro.tech и любых проверок, требующих авторизации, логин и пароль вводит тестировщик (пользователь) по запросу. В инструкциях и скриптах не указывать и не хранить реальные учётные данные.

Проводить на **https://tsspro.tech** в браузере (желательно после каждого обновления сервера). Дата/релиз: \_\_\_\_\_\_\_\_\_\_

---

## 2.1 Доступ и авторизация

- [ ] Открыть https://tsspro.tech — приложение загружается, нет белого экрана и ошибок в консоли (F12).
- [ ] Регистрация: новый email/пароль — успешная регистрация и переход на дашборд.
- [ ] Выход и повторный вход — логин по тем же данным.
- [ ] В Network (DevTools) запросы идут на tsspro.tech, не на alexhosting.ru.

## 2.2 Питание

- [ ] Блок «Питание»: переключение дат (кнопки с датами) — данные меняются, активный день подсвечен.
- [ ] Добавить приём пищи, отредактировать, удалить запись — всё сохраняется и отображается.
- [ ] Прогресс-бары (калории, БЖУ) обновляются после добавления/удаления.

## 2.3 Сон и здоровье

- [ ] «Сегодня»: ввод сна вручную (Изменить) — данные сохраняются и отображаются.
- [ ] История: список записей, даты и часы отображаются.
- [ ] Удаление записи по фото: кнопка «Удалить» — подтверждение (на web — confirm), запись исчезает.
- [ ] Нет 404 при удалении.

## 2.4 Фитнес

- [ ] Блок «Фитнес»: в шапке CTL / ATL / TSB (или плейсхолдер), ниже — ссылка Intervals.icu и кнопка «Синхронизировать».
- [ ] При привязке Intervals.icu и синхронизации — тренировки/wellness появляются на дашборде (если есть данные).

## 2.5 Тренировки

- [ ] Список тренировок: записи, даты и метрики отображаются.
- [ ] Добавить тренировку вручную / по скриншоту — запись появляется; при совпадении с Intervals — одна запись (дедуп).
- [ ] Детали тренировки: графики мощности/скорости (если есть FIT), метрики (NP, VI).
- [ ] Удаление тренировки — запись исчезает.

## 2.6 Чат

- [ ] «Чат»: список чатов, отправка сообщения — ответ приходит.
- [ ] Три точки у вкладки чата: открывается меню (на web — модальное окно).
- [ ] «Переименовать» — имя чата меняется.
- [ ] «Удалить» — подтверждение, чат удаляется, переключение на другой или новый чат.
- [ ] «Очистить» (в шапке) — сообщения текущего чата очищаются.

## 2.7 Доп. сценарии

- [ ] Камера / загрузка фото: анализ еды, сна, wellness — результат сохраняется и отображается.
- [ ] «Решение на сегодня» — ответ на русском, без 5xx.
- [ ] Профиль атлета: редактирование и сохранение — данные обновляются.
- [ ] Смена темы (если есть) — без ошибок.

---

## 3. Инфраструктура и мониторинг (по возможности)

- [ ] Контейнеры: `docker compose ps` — backend (healthy), frontend (Up), остальные без постоянных рестартов.
- [ ] HTTPS: валидный сертификат на tsspro.tech, без предупреждений.
- [ ] Sentry: события/ошибки попадают в проект (если настроен).
- [ ] Бэкап: свежий дамп в Space `tsspro-backups` в `backups/postgres/` (или ручной бэкап выполняется).

---

## 4. Регрессия при смене домена/конфига

- [ ] Все запросы на актуальный origin (tsspro.tech).
- [ ] Нет смешанного контента и блокировок в консоли.
- [ ] Куки/токены для tsspro.tech — логин не сбрасывается после перезагрузки в рамках сессии.

---

## 5. Краткий чек-лист перед релизом

- [ ] Локально: `cd backend && pytest tests/ -v` — зелёные. (Требуется PostgreSQL с ролью `smart_trainer` и `DATABASE_URL` в .env; иначе тесты, использующие БД, падают с InvalidAuthorizationSpecificationError.)
- [ ] Локально: `cd frontend && npm test` — зелёные.
- [ ] Production: логин, питание, сон, фитнес, чат, удаление (сон/чат) — без ошибок и 404.
- [ ] Production: три точки в чате — меню, удаление и переименование работают.
- [ ] HTTPS и домен tsspro.tech — без редиректов на старый домен.
- [ ] По желанию: Sentry, бэкапы в Space, контейнеры без аномальных рестартов.
