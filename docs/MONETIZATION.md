# Анализ функционала и схемы монетизации Smart Trainer

**Дата:** 25 февраля 2026  
**Домен:** alexhosting.ru  
**Проект:** Smart Trainer — AI-тренер для спортсменов

---

## 1. Полная инвентаризация функционала

### 1.1 Модули приложения

| # | Модуль | Описание | AI (Gemini) | Себестоимость на 1 действие |
|---|--------|----------|:-----------:|----------------------------|
| 1 | **Регистрация / Вход** | Email + пароль, JWT (access + refresh tokens) | Нет | ~0 |
| 2 | **Анализ фото еды** | Загрузка фото → Gemini распознаёт блюдо, считает КБЖУ | Да | ~$0.001–0.003 |
| 3 | **Дневник питания** | CRUD записей, итоги дня, прогресс-бары по целям, смена дат | Нет | ~0 |
| 4 | **Цели питания** | Калории/Б/Ж/У — из профиля или дефолтные | Нет | ~0 |
| 5 | **Анализ фото сна** | Скриншот трекера сна → Gemini извлекает метрики (фазы, quality, HRV) | Да | ~$0.001–0.003 |
| 6 | **Анализ фото пульса/HRV** | Фото экрана часов → Gemini извлекает RHR и HRV | Да | ~$0.001–0.003 |
| 7 | **Автоклассификация фото** | Одно фото → AI определяет тип (еда / сон / пульс) и вызывает нужный анализатор | Да | ~$0.001–0.002 |
| 8 | **Wellness (сон/здоровье)** | Ручной ввод сна, RHR, HRV, веса. Хранение в БД | Нет | ~0 |
| 9 | **Тренировки (CRUD)** | Ручное добавление тренировок (дата, тип, длительность, дистанция, TSS) | Нет | ~0 |
| 10 | **Загрузка FIT-файлов** | Парсинг .fit → автоматический TSS (по мощности или по длительности/типу) | Нет | ~0 |
| 11 | **Фитнес-метрики (CTL/ATL/TSB)** | Автоматический расчёт тренировочной нагрузки по TSS | Нет | ~0 |
| 12 | **Intervals.icu интеграция** | Подключение, синхронизация wellness и тренировок, плановые события | Нет | ~0 |
| 13 | **AI-чат с тренером** | Свободный диалог с AI. Контекст: профиль, питание, сон, тренировки за 7 дней | Да | ~$0.002–0.005 |
| 14 | **AI-оркестратор (Go/Modify/Skip)** | 3-уровневая иерархия решений. Анализ готовности + нагрузки → рекомендация | Да | ~$0.003–0.008 |
| 15 | **Автозапуск оркестратора** | Cron в 7:00 и 16:00 для всех пользователей | Да | ~$0.003–0.008 × N юзеров |
| 16 | **Профиль атлета** | Вес, рост, год рождения, FTP. Strava-поля (legacy) | Нет | ~0 |
| 17 | **Strava интеграция** | OAuth, синхронизация активностей (legacy, частично) | Нет | ~0 |

### 1.2 API-эндпоинты (25 штук)

**Auth (4):**
- `POST /auth/register` — регистрация
- `POST /auth/login` — вход
- `POST /auth/refresh` — обновление токена (rotation)
- `GET /auth/me` — текущий пользователь

**Nutrition (6):**
- `POST /nutrition/analyze` — AI-анализ фото еды
- `POST /nutrition/entries` — создание записи вручную
- `GET /nutrition/day` — дневник за день
- `GET /nutrition/entries/{id}` — запись по ID
- `PATCH /nutrition/entries/{id}` — редактирование
- `DELETE /nutrition/entries/{id}` — удаление

**Photo (4):**
- `POST /photo/analyze` — универсальный AI-анализ (еда/сон/пульс)
- `POST /photo/analyze-sleep` — AI-анализ скриншота сна
- `POST /photo/save-sleep` — сохранение превью сна
- `GET /photo/sleep-extractions` — история экстракций сна

**Workouts (5):**
- `GET /workouts` — список тренировок
- `POST /workouts` — создание
- `PATCH /workouts/{id}` — обновление
- `DELETE /workouts/{id}` — удаление
- `POST /workouts/upload-fit` — загрузка FIT
- `GET /workouts/fitness` — CTL/ATL/TSB

**Wellness (2):**
- `GET /wellness` — данные за период
- `PUT /wellness` — upsert дня

**Chat + Orchestrator (3):**
- `GET /chat/history` — история
- `POST /chat/send` — сообщение AI-тренеру
- `POST /chat/orchestrator/run` — запуск решения Go/Modify/Skip

**Intervals (5):**
- `GET /intervals/status` — статус подключения
- `POST /intervals/link` — подключение
- `POST /intervals/unlink` — отключение
- `POST /intervals/sync` — синхронизация
- `GET /intervals/events` — плановые события
- `GET /intervals/activities` — выполненные тренировки

**Profile (2):**
- `GET /athlete-profile` — профиль
- `PATCH /athlete-profile` — обновление

### 1.3 Экраны фронтенда (8)

| Экран | Ключевые фичи |
|-------|---------------|
| Login | Email + пароль |
| Register | Создание аккаунта |
| Dashboard | Питание (с переключением дат), wellness, фитнес CTL/ATL/TSB, тренировки, кнопка запуска оркестратора, FAB камера |
| Camera | Фото/галерея → AI определяет тип → превью → редактирование → сохранение |
| Chat | Чат с AI-тренером, быстрые подсказки, кнопка «Решение на сегодня» |
| Athlete Profile | Вес, рост, год рождения, FTP |
| Wellness | Календарь + формы сна/RHR/HRV, график сна за 7 дней |
| Intervals Link | Подключение/отключение Intervals.icu, синхронизация |

---

## 2. Структура себестоимости

### 2.1 Постоянные затраты (в месяц)

| Статья | Стоимость | Комментарий |
|--------|-----------|-------------|
| VPS (DigitalOcean / аналог) | $6–12 | Droplet 1–2 vCPU, 2 GB RAM |
| Домен alexhosting.ru | ~$1 | ~$10–15/год |
| SSL (Caddy / Let's Encrypt) | $0 | Бесплатно |
| PostgreSQL | $0 | Внутри Docker |
| **Итого постоянных** | **~$7–13/мес** | |

### 2.2 Переменные затраты (Gemini API)

Используется **Gemini 2.0 Flash** — самая дешёвая модель Google.

| Операция | Вход (токены) | Выход (токены) | ~Стоимость |
|----------|:---:|:---:|:---:|
| Анализ фото еды | ~300 текст + ~250 изображ. | ~150 | ~$0.001–0.003 |
| Анализ фото сна | ~400 текст + ~250 изображ. | ~300 | ~$0.001–0.003 |
| Классификация фото | ~200 + ~250 изображ. | ~100 | ~$0.001 |
| Сообщение чата | ~3000 (контекст) | ~500 | ~$0.002–0.005 |
| Оркестратор (решение) | ~4000 (контекст) | ~300 | ~$0.003–0.008 |

**Стоимость на одного активного пользователя в день (типичный сценарий):**

| Действие | Кол-во/день | Стоимость |
|----------|:-----------:|:---------:|
| Фото еды | 3 | $0.009 |
| Фото сна | 1 | $0.003 |
| Сообщения чата | 3 | $0.015 |
| Оркестратор (авто 2×/день) | 2 | $0.016 |
| **Итого на пользователя/день** | | **~$0.04** |
| **Итого на пользователя/месяц** | | **~$1.20** |

### 2.3 Масштаб затрат

| Пользователей | Gemini/мес | Сервер/мес | Итого/мес |
|:---:|:---:|:---:|:---:|
| 10 | $12 | $7 | **$19** |
| 50 | $60 | $12 | **$72** |
| 100 | $120 | $24 | **$144** |
| 500 | $600 | $48 | **$648** |
| 1000 | $1,200 | $96 | **$1,296** |

---

## 3. Анализ ценности для пользователя

### 3.1 Уникальные преимущества (USP)

| Фича | Ценность | Конкуренты |
|-------|----------|-----------|
| **AI-анализ фото еды** | Высокая — не нужно искать в базе, сфоткал и готово | MyFitnessPal (ручной поиск), Yazio (платный AI), FatSecret |
| **AI-анализ фото сна** | Высокая — скриншот любого трекера, не нужна интеграция | Нет аналогов (все требуют прямую интеграцию) |
| **AI-оркестратор Go/Modify/Skip** | Очень высокая — персонализированное решение на основе ВСЕХ данных | TrainerRoad ($20/мес, но без питания), Whoop ($30/мес) |
| **Единый дашборд** | Высокая — питание + сон + тренировки + нагрузка в одном месте | Нет прямых аналогов в одном приложении |
| **Intervals.icu интеграция** | Средняя — Intervals бесплатный, популярен среди велосипедистов | Intervals сам по себе не даёт AI-рекомендаций |
| **FIT-файлы** | Средняя — загрузка с любого устройства Garmin/Wahoo/etc. | Intervals, Strava (но без AI-анализа) |
| **CTL/ATL/TSB** | Средняя — стандарт в мире тренировок на выносливость | Intervals (бесплатно), TrainingPeaks ($20/мес), Golden Cheetah (бесплатно) |

### 3.2 Целевая аудитория

| Сегмент | Описание | Готовность платить | Размер рынка |
|---------|----------|:------------------:|:------------:|
| **Любители выносливости** | Бегуны, велосипедисты, триатлеты (КБЖУ + нагрузка + AI) | $5–15/мес | Большой |
| **Фитнес-энтузиасты** | Зал + питание (фото еды + цели КБЖУ) | $3–10/мес | Очень большой |
| **Серьёзные спортсмены** | Intervals.icu + FIT + CTL/ATL/TSB + оркестратор | $10–25/мес | Средний |
| **Персональные тренеры** | Мониторинг клиентов (B2B) | $20–50/мес | Средний |

---

## 4. Схемы монетизации

### 4.1 СХЕМА A: Freemium + Подписка (рекомендуемая)

Самая распространённая модель для фитнес-приложений. Низкий порог входа + предсказуемый доход.

#### Бесплатный тариф (Free)

| Фича | Лимит |
|-------|-------|
| Регистрация, логин | Без ограничений |
| Ручной ввод питания | Без ограничений |
| Ручной ввод тренировок | Без ограничений |
| Ручной ввод wellness | Без ограничений |
| Дашборд, профиль | Без ограничений |
| **AI-анализ фото еды** | **3 фото/день** |
| **AI-чат** | **5 сообщений/день** |
| **AI-оркестратор** | **1 запуск/день** |
| AI-анализ фото сна | Нет |
| AI-анализ фото пульса | Нет |
| FIT-файлы | Нет |
| Intervals.icu | Нет |
| CTL/ATL/TSB | Нет |

**Себестоимость Free-пользователя:** ~$0.01–0.02/день = ~$0.50/мес

#### Платный тариф (Pro)

| Параметр | Значение |
|----------|----------|
| **Цена** | **$4.99/мес** или **$39.99/год** ($3.33/мес) |
| AI-анализ фото еды | Без ограничений |
| AI-анализ фото сна | Без ограничений |
| AI-анализ фото пульса | Без ограничений |
| AI-чат | Без ограничений |
| AI-оркестратор | Без ограничений + авто 2×/день |
| FIT-файлы | Без ограничений |
| Intervals.icu | Полная интеграция |
| CTL/ATL/TSB | Из тренировок и Intervals |
| Приоритетная поддержка | Email |

**Себестоимость Pro-пользователя:** ~$1.20/мес  
**Маржа при $4.99/мес:** ~$3.79 (76%)  
**Маржа при $3.33/мес (годовая):** ~$2.13 (64%)

#### Финансовая модель Freemium

| Метрика | Значение |
|---------|---------|
| Конверсия Free → Pro | 5–10% (среднее для фитнес) |
| При 1000 пользователей (Free: 900, Pro: 100) | |
| Доход/мес | 100 × $4.99 = **$499** |
| Расходы Gemini (Free: 900 × $0.50 + Pro: 100 × $1.20) | $570 |
| Расходы сервер | ~$48 |
| **Итого расходов** | **$618** |
| **P&L** | **-$119** (при 5% конверсии) |

| При 10% конверсии (Free: 900, Pro: 100) | |
|---|---|
| Доход/мес | 100 × $4.99 = **$499** |
| ...тот же расчёт | **-$119** |

**Точка безубыточности:** ~1500 пользователей при 10% конверсии = 150 Pro × $4.99 = $748.50 vs расходы ~$720.

**Вывод:** Freemium работает при масштабе >1500 юзеров. Для раннего этапа нужно ограничить бесплатный тариф сильнее или убрать AI из Free.

---

### 4.2 СХЕМА B: Только подписка (без бесплатного AI)

Более агрессивная модель. Бесплатно — только дневник без AI.

#### Free (без AI)

| Фича | Доступ |
|-------|--------|
| Ручной ввод питания, тренировок, wellness | Да |
| Дашборд, профиль, прогресс-бары | Да |
| AI-фичи (все) | Нет — заблюрено / locked |

**Себестоимость Free:** ~$0 (нет Gemini-вызовов)

#### Starter ($2.99/мес)

| Фича | Лимит |
|-------|-------|
| AI-анализ фото еды | 5/день |
| AI-чат | 10/день |
| AI-оркестратор | 1/день |
| Без: фото сна, FIT, Intervals | — |

**Себестоимость:** ~$0.50/мес. **Маржа:** 83%.

#### Pro ($6.99/мес или $59.99/год)

Всё без ограничений.

**Себестоимость:** ~$1.20/мес. **Маржа:** 83%.

#### Финансовая модель (только подписка)

| Сценарий | Пользователей | Starter | Pro | Доход | Расходы | P&L |
|----------|:---:|:---:|:---:|:---:|:---:|:---:|
| Раннее MVP | 100 | 30 | 10 | $160 | $63 | **+$97** |
| Рост | 500 | 100 | 50 | $649 | $195 | **+$454** |
| Масштаб | 2000 | 400 | 200 | $2,598 | $672 | **+$1,926** |

**Вывод:** Модель прибыльна с первого дня, но более высокий барьер для привлечения пользователей.

---

### 4.3 СХЕМА C: Пакеты AI-кредитов (usage-based)

Пользователь покупает пакеты «кредитов» для AI-функций.

| Пакет | Кредитов | Цена | За кредит |
|-------|:--------:|:----:|:---------:|
| Starter | 50 | $1.99 | $0.040 |
| Standard | 200 | $4.99 | $0.025 |
| Premium | 500 | $9.99 | $0.020 |

**Расход кредитов:**
- Фото еды: 1 кредит
- Фото сна: 1 кредит
- Сообщение чата: 1 кредит
- Оркестратор: 2 кредита

**Плюсы:** Честная модель — платишь за то, что используешь. Нет risk of overuse.  
**Минусы:** Сложнее предсказать revenue. Пользователи «боятся тратить» кредиты. Менее привычная модель.

**Себестоимость 1 кредита:** ~$0.003–0.005. При цене $0.020–0.040 маржа **75–90%**.

---

### 4.4 СХЕМА D: B2B для тренеров

Персональные тренеры платят за доступ к данным своих подопечных.

| Тариф | Клиентов | Цена/мес |
|-------|:--------:|:--------:|
| Solo Coach | до 5 | $14.99 |
| Team Coach | до 20 | $39.99 |
| Gym/Club | до 50 | $89.99 |

**Требует доработки:** экран тренера, dashboard мульти-клиент, приглашения.  
**Оценка доработки:** 3–6 недель.

---

### 4.5 СХЕМА E: Гибридная (рекомендуемая для старта)

Комбинация Freemium + подписка с минимальным бесплатным AI.

#### Уровни

| | Free | Lite ($2.99/мес) | Pro ($6.99/мес) |
|---|---|---|---|
| Ручной ввод (всё) | Без лимитов | Без лимитов | Без лимитов |
| AI-фото еды | 2/день | 10/день | Без лимитов |
| AI-фото сна/пульс | Нет | 2/день | Без лимитов |
| AI-чат | 3/день | 15/день | Без лимитов |
| AI-оркестратор | 1/день | 2/день | Без лимитов + авто |
| FIT-файлы | Нет | 5/мес | Без лимитов |
| Intervals.icu | Нет | Нет | Да |
| CTL/ATL/TSB | Только из тренировок | Из тренировок | Из тренировок + Intervals |
| Годовая подписка | — | $24.99/год | $59.99/год |

---

## 5. Технические требования для монетизации

### 5.1 Что нужно реализовать (в порядке приоритета)

| # | Задача | Сложность | Время |
|---|--------|:---------:|:-----:|
| 1 | **Система лимитов (rate limits per user/tier)** — счётчик AI-вызовов по тарифу | Средняя | 2–3 дня |
| 2 | **Таблица `subscription` в БД** — tier, expires_at, stripe_customer_id | Простая | 1 день |
| 3 | **Middleware проверки тарифа** — перед каждым AI-эндпоинтом | Средняя | 1–2 дня |
| 4 | **Интеграция оплаты (Stripe / YooKassa)** — webhook, подтверждение | Высокая | 3–5 дней |
| 5 | **Экран подписки в приложении** — тарифы, статус, управление | Средняя | 2–3 дня |
| 6 | **Landing page** — описание продукта, цены, CTA | Средняя | 2–3 дня |
| 7 | **Google Play billing** (для Android) — если публикация в Store | Высокая | 3–5 дней |
| 8 | **Apple In-App Purchase** (для iOS) — если публикация в App Store | Высокая | 3–5 дней |

**Общее время на монетизацию (web + Stripe):** ~10–15 рабочих дней.  
**С мобильными магазинами:** +6–10 дней.

### 5.2 Платёжные системы

| Система | Для кого | Комиссия | Примечание |
|---------|----------|:--------:|-----------|
| **Stripe** | Международные карты | 2.9% + $0.30 | Стандарт. Подписки, webhook |
| **YooKassa** | Россия (карты, СБП, ЮMoney) | 3.5% | Для RU-аудитории |
| **Google Play Billing** | Android (Play Store) | 15% (первый $1M) → 30% | Обязательно при публикации в Play |
| **Apple IAP** | iOS (App Store) | 15% (первый $1M) → 30% | Обязательно при публикации в App Store |

**Рекомендация:** Начать с Stripe (web) + YooKassa (если основная аудитория RU). Мобильные магазины — на этапе публикации.

### 5.3 Блокировка фич по тарифу (пример)

Бэкенд: в каждом AI-эндпоинте (`/nutrition/analyze`, `/photo/analyze`, `/chat/send`, `/chat/orchestrator/run`) добавляется проверка:

```
1. Получить user.subscription_tier (free / lite / pro)
2. Посчитать сегодняшние вызовы этого типа
3. Если лимит превышен → HTTP 429 с сообщением "Upgrade to Pro"
```

Фронтенд: при получении 429 — показать экран «Обновить до Pro» с кнопкой оплаты.

---

## 6. Конкурентный анализ цен

| Приложение | Цена/мес | AI-анализ еды | Тренировки | Сон | AI-тренер |
|-----------|:--------:|:---:|:---:|:---:|:---:|
| **MyFitnessPal Premium** | $19.99 | Нет (ручной поиск) | Нет | Нет | Нет |
| **Yazio Pro** | $6.99 | Да (AI фото) | Нет | Нет | Нет |
| **TrainerRoad** | $19.99 | Нет | Да (план) | Нет | Да (адаптивный) |
| **Whoop** | $30 + устройство | Нет | Да (strain) | Да (аппаратный) | Да (recovery) |
| **TrainingPeaks Premium** | $19.95 | Нет | Да (CTL/ATL/TSB) | Нет | Нет |
| **Intervals.icu** | Бесплатно | Нет | Да (CTL/ATL/TSB) | Нет | Нет |
| **Smart Trainer Pro** | **$6.99** | **Да (AI фото)** | **Да (FIT + ручные)** | **Да (AI фото)** | **Да (AI + оркестратор)** |

**Позиционирование:** Smart Trainer за $6.99 предлагает **больше AI-функций**, чем любой конкурент. Единственное приложение, объединяющее AI-питание + AI-сон + AI-тренер + CTL/ATL/TSB.

---

## 7. Дорожная карта монетизации

### Фаза 1: MVP монетизации (2–3 недели)

1. Добавить таблицу `user_subscription` (tier, expires_at, payment_provider, external_id)
2. Реализовать middleware проверки лимитов по тарифу
3. Интегрировать Stripe (или YooKassa для RU) — подписка через web
4. Экран «Подписка» в приложении (текущий тариф, лимиты, кнопка оплаты)
5. Landing page на alexhosting.ru (без логина — описание, цены, CTA)

### Фаза 2: Рост (1–2 месяца)

6. Публикация Android APK (вне Play Store, прямая ссылка) — бесплатно
7. Публикация в Google Play + Play Billing
8. Push-уведомления (результат оркестратора)
9. Referral-программа (пригласи друга → +7 дней Pro)
10. Onboarding-туториал для новых пользователей

### Фаза 3: Масштабирование (3–6 месяцев)

11. B2B тариф для тренеров
12. Apple App Store + In-App Purchase
13. Расширенная аналитика (графики прогресса за месяц/год)
14. Экспорт данных (CSV/PDF отчёты)
15. Мультиязычность (English — основной рынок для масштаба)

---

## 8. Рекомендация

**Для старта рекомендуется Схема E (гибридная)** — три уровня (Free / Lite $2.99 / Pro $6.99) с минимальным бесплатным AI для привлечения пользователей и чётким upgrade path.

**Ключевые числа:**

| Метрика | Значение |
|---------|---------|
| Себестоимость Pro-пользователя | ~$1.20/мес |
| Цена Pro | $6.99/мес |
| Маржа Pro | **83%** |
| Точка безубыточности (только сервер) | **3 Pro-пользователя** |
| Целевой MRR через 6 мес | $500–1,500 |
| Целевой MRR через 12 мес | $2,000–5,000 |

**Первое действие:** реализовать систему лимитов + Stripe/YooKassa + экран подписки. Это ~10–15 рабочих дней.
